From: https://github.com/nvbn/thefuck/pull/400
Description: Fix wrong interpretation of the disabled flag.
---
 thefuck/utils.py |   13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

--- thefuck.orig/thefuck/utils.py
+++ thefuck/thefuck/utils.py
@@ -23,11 +23,16 @@ def memoize(fn):
 
     @wraps(fn)
     def wrapper(*args, **kwargs):
-        key = pickle.dumps((args, kwargs))
-        if key not in memo or memoize.disabled:
-            memo[key] = fn(*args, **kwargs)
+        if not memoize.disabled:
+            key = pickle.dumps((args, kwargs))
+            if key not in memo:
+                memo[key] = fn(*args, **kwargs)
+            value = memo[key]
+        else:
+            # Memoize is disabled, call the function
+            value = fn(*args, **kwargs)
 
-        return memo[key]
+        return value
 
     return wrapper
 memoize.disabled = False
